@wip
Feature: 크루 활성화
  시작일이 되면 스케줄러가 크루를 자동으로 활성화하고 챌린지가 시작된다.

  # ===== Happy Path =====

  Scenario: 시작일이 되면 크루가 자동으로 활성화된다
    Given 크루 "운동 크루"의 시작일이 오늘이다
    And 크루 "운동 크루"는 모집 중 상태이다
    When 크루 활성화 스케줄러가 실행된다
    Then 크루 "운동 크루"의 상태는 "ACTIVE"이다

  Scenario: 활성화 시 모든 멤버의 첫 챌린지가 생성된다
    Given 크루 "운동 크루"의 시작일이 오늘이다
    And 크루 "운동 크루"는 모집 중 상태이다
    And "leader_001"과 "user_002"가 크루에 참여 중이다
    When 크루 활성화 스케줄러가 실행된다
    Then 크루 "운동 크루"의 상태는 "ACTIVE"이다
    And "leader_001"의 챌린지가 자동 생성된다
    And "user_002"의 챌린지가 자동 생성된다
    And 챌린지 cycle_number는 1이다

  Scenario: 여러 크루가 같은 시작일이면 모두 활성화된다
    Given 크루 "운동 크루"의 시작일이 오늘이다
    And 크루 "독서 크루"의 시작일이 오늘이다
    And 두 크루 모두 모집 중 상태이다
    When 크루 활성화 스케줄러가 실행된다
    Then 크루 "운동 크루"의 상태는 "ACTIVE"이다
    And 크루 "독서 크루"의 상태는 "ACTIVE"이다

  # ===== 실패 / 무시 케이스 =====

  Scenario: 시작일이 아직 안 된 크루는 활성화되지 않는다
    Given 크루 "운동 크루"의 시작일이 내일이다
    And 크루 "운동 크루"는 모집 중 상태이다
    When 크루 활성화 스케줄러가 실행된다
    Then 크루 "운동 크루"의 상태는 "RECRUITING"이다

  Scenario: 이미 활성화된 크루는 중복 활성화되지 않는다
    Given 크루 "운동 크루"의 시작일이 오늘이다
    And 크루 "운동 크루"는 이미 활성 상태이다
    When 크루 활성화 스케줄러가 실행된다
    Then 크루 "운동 크루"의 상태는 "ACTIVE"이다
    And 챌린지가 중복 생성되지 않는다

  Scenario: 종료된 크루는 활성화되지 않는다
    Given 크루 "운동 크루"의 시작일이 오늘이다
    And 크루 "운동 크루"는 종료 상태이다
    When 크루 활성화 스케줄러가 실행된다
    Then 크루 "운동 크루"의 상태는 "COMPLETED"이다
